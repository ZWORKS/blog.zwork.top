<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_forumlist' 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_forumlist','{     \"1\": {         \"fid\": \"1\",         \"name\": \"PHP\",         \"rank\": \"4\",         \"threads\": \"9\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"PHP交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/1.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         ],         \"tagcatemap\": {             \"1\": {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         },         \"tagmap\": {             \"2\": {                 \"tagid\": \"2\",                 \"cateid\": \"1\",                 \"name\": \"Pay\",                 \"rank\": \"1\",                 \"enable\": \"1\"             },             \"1\": {                 \"tagid\": \"1\",                 \"cateid\": \"1\",                 \"name\": \"Offices\",                 \"rank\": \"0\",                 \"enable\": \"1\"             },             \"3\": {                 \"tagid\": \"3\",                 \"cateid\": \"1\",                 \"name\": \"Redis、Memcached\",                 \"rank\": \"0\",                 \"enable\": \"1\"             }         }     },     \"2\": {         \"fid\": \"2\",         \"name\": \"HTML\",         \"rank\": \"3\",         \"threads\": \"1\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/2.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     },     \"3\": {         \"fid\": \"3\",         \"name\": \"WIN10\",         \"rank\": \"2\",         \"threads\": \"10\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"Win10技术交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/3.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"2\": {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"4\": {         \"fid\": \"4\",         \"name\": \"Linux\",         \"rank\": \"1\",         \"threads\": \"6\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/4.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"3\": {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"5\": {         \"fid\": \"5\",         \"name\": \"面试\",         \"rank\": \"0\",         \"threads\": \"0\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"0\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"view/img/forum.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     } }','1489915804')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489833364,     \"cron_2_last_date\": 1489766400,     \"forums\": 5,     \"lastupdate\": 1489915744,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_hoping_hot_threads' 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_hoping_hot_threads','[]','1489919344')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_cron_lock_1','1','1489915754')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_session  WHERE `last_date`<1489912144 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_session_data  WHERE `last_date`<1489912144 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_cron_lock_1' 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_cron_lock_2','1','1489915754')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	UPDATE bbs_forum SET `todayposts`='0',`todaythreads`='0'  WHERE `fid`=1 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	UPDATE bbs_forum SET `todayposts`='0',`todaythreads`='0'  WHERE `fid`=2 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	UPDATE bbs_forum SET `todayposts`='0',`todaythreads`='0'  WHERE `fid`=3 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	UPDATE bbs_forum SET `todayposts`='0',`todaythreads`='0'  WHERE `fid`=4 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	UPDATE bbs_forum SET `todayposts`='0',`todaythreads`='0'  WHERE `fid`=5 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_forumlist' 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_queue  WHERE `expiry`<1489915744 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_table_day (`year`,`month`,`day`,`create_date`,`table`,`maxid`,`count`) VALUES ('2017','3','19','1489886944','thread','28','26')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_table_day (`year`,`month`,`day`,`create_date`,`table`,`maxid`,`count`) VALUES ('2017','3','19','1489886944','post','28','26')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_table_day (`year`,`month`,`day`,`create_date`,`table`,`maxid`,`count`) VALUES ('2017','3','19','1489886944','user','1','1')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_cron_lock_2' 
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489915744,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489915744,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 17:29:04	220.181.108.84	/	0	UPDATE bbs_session SET `uid`='',`fid`='0',`url`='',`last_date`='1489915744',`data`='',`ip`='3702877268',`useragent`='Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)',`bigdata`='0'  WHERE `sid`='0p293gn4pgt24lu9jlpv1rm0i2' 
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_forumlist','{     \"1\": {         \"fid\": \"1\",         \"name\": \"PHP\",         \"rank\": \"4\",         \"threads\": \"9\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"PHP交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/1.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         ],         \"tagcatemap\": {             \"1\": {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         },         \"tagmap\": {             \"2\": {                 \"tagid\": \"2\",                 \"cateid\": \"1\",                 \"name\": \"Pay\",                 \"rank\": \"1\",                 \"enable\": \"1\"             },             \"1\": {                 \"tagid\": \"1\",                 \"cateid\": \"1\",                 \"name\": \"Offices\",                 \"rank\": \"0\",                 \"enable\": \"1\"             },             \"3\": {                 \"tagid\": \"3\",                 \"cateid\": \"1\",                 \"name\": \"Redis、Memcached\",                 \"rank\": \"0\",                 \"enable\": \"1\"             }         }     },     \"2\": {         \"fid\": \"2\",         \"name\": \"HTML\",         \"rank\": \"3\",         \"threads\": \"1\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/2.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     },     \"3\": {         \"fid\": \"3\",         \"name\": \"WIN10\",         \"rank\": \"2\",         \"threads\": \"10\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"Win10技术交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/3.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"2\": {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"4\": {         \"fid\": \"4\",         \"name\": \"Linux\",         \"rank\": \"1\",         \"threads\": \"6\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/4.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"3\": {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"5\": {         \"fid\": \"5\",         \"name\": \"面试\",         \"rank\": \"0\",         \"threads\": \"0\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"0\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"view/img/forum.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     } }','1489925832')
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489915744,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925772,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	DELETE FROM bbs_cache  WHERE `k`='bbs_hoping_hot_threads' 
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_hoping_hot_threads','[]','1489929372')
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_cron_lock_1','1','1489925782')
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	DELETE FROM bbs_session  WHERE `last_date`<1489922172 
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	DELETE FROM bbs_session_data  WHERE `last_date`<1489922172 
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	DELETE FROM bbs_cache  WHERE `k`='bbs_cron_lock_1' 
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925772,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:12	110.251.15.252	/	1	UPDATE bbs_session SET `uid`='1',`fid`='0',`url`='',`last_date`='1489925772',`data`='',`ip`='1861947388',`useragent`='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',`bigdata`='0'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:16:25	110.251.15.252	/?thread-19.htm	0	INSERT INTO bbs_session (`sid`,`uid`,`fid`,`url`,`last_date`,`data`,`ip`,`useragent`,`bigdata`) VALUES ('prom26svsa8ur0fjnhqg4bbi72','0','0','?thread-19.htm','1489925785','','1861947388','Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36','0')
<?php exit;?>	2017-03-19 20:16:25	110.251.15.252	/?thread-19.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925785,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:25	110.251.15.252	/?thread-19.htm	1	UPDATE LOW_PRIORITY `bbs_thread` SET views=views+1 WHERE tid='19'
<?php exit;?>	2017-03-19 20:16:25	110.251.15.252	/?thread-19.htm	1	UPDATE bbs_post SET `GG_reply_read`='1'  WHERE `tid`=19 AND `GG_reply_user`='1' AND `GG_reply_read`=0 
<?php exit;?>	2017-03-19 20:16:25	110.251.15.252	/?thread-19.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925785,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:25	110.251.15.252	/?thread-19.htm	1	UPDATE bbs_session SET `uid`='1',`fid`='3',`url`='?thread-19.htm',`last_date`='1489925785',`data`='',`ip`='1861947388',`useragent`='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',`bigdata`='0'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:16:35	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925795,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:35	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_hoping_hot_threads','[]','1489929395')
<?php exit;?>	2017-03-19 20:16:35	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925795,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:35	110.251.15.252	/	1	UPDATE bbs_session SET `fid`='0',`url`='',`last_date`='1489925795'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:16:39	110.251.15.252	/?thread-28.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925799,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:39	110.251.15.252	/?thread-28.htm	1	UPDATE LOW_PRIORITY `bbs_thread` SET views=views+1 WHERE tid='28'
<?php exit;?>	2017-03-19 20:16:39	110.251.15.252	/?thread-28.htm	1	UPDATE bbs_post SET `GG_reply_read`='1'  WHERE `tid`=28 AND `GG_reply_user`=1 AND `GG_reply_read`=0 
<?php exit;?>	2017-03-19 20:16:39	110.251.15.252	/?thread-28.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925799,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:16:39	110.251.15.252	/?thread-28.htm	1	UPDATE bbs_session SET `fid`='4',`url`='?thread-28.htm',`last_date`='1489925799'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:17:00	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925820,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:00	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_hoping_hot_threads','[]','1489929420')
<?php exit;?>	2017-03-19 20:17:00	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925820,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:00	110.251.15.252	/	1	UPDATE bbs_session SET `fid`='0',`url`='',`last_date`='1489925820'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:17:04	110.251.15.252	/?thread-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925824,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:04	110.251.15.252	/?thread-23.htm	1	UPDATE LOW_PRIORITY `bbs_thread` SET views=views+1 WHERE tid='23'
<?php exit;?>	2017-03-19 20:17:04	110.251.15.252	/?thread-23.htm	1	UPDATE bbs_post SET `GG_reply_read`='1'  WHERE `tid`=23 AND `GG_reply_user`=1 AND `GG_reply_read`=0 
<?php exit;?>	2017-03-19 20:17:04	110.251.15.252	/?thread-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925824,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:04	110.251.15.252	/?thread-23.htm	1	UPDATE bbs_session SET `fid`='4',`url`='?thread-23.htm',`last_date`='1489925824'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:17:09	110.251.15.252	/?post-update-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925829,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:09	110.251.15.252	/?post-update-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925829,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:09	110.251.15.252	/?post-update-23.htm	1	UPDATE bbs_session SET `url`='?post-update-23.htm',`last_date`='1489925829'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	DELETE FROM bbs_cache  WHERE `k`='bbs_forumlist' 
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_forumlist','{     \"1\": {         \"fid\": \"1\",         \"name\": \"PHP\",         \"rank\": \"4\",         \"threads\": \"9\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"PHP交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/1.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         ],         \"tagcatemap\": {             \"1\": {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         },         \"tagmap\": {             \"2\": {                 \"tagid\": \"2\",                 \"cateid\": \"1\",                 \"name\": \"Pay\",                 \"rank\": \"1\",                 \"enable\": \"1\"             },             \"1\": {                 \"tagid\": \"1\",                 \"cateid\": \"1\",                 \"name\": \"Offices\",                 \"rank\": \"0\",                 \"enable\": \"1\"             },             \"3\": {                 \"tagid\": \"3\",                 \"cateid\": \"1\",                 \"name\": \"Redis、Memcached\",                 \"rank\": \"0\",                 \"enable\": \"1\"             }         }     },     \"2\": {         \"fid\": \"2\",         \"name\": \"HTML\",         \"rank\": \"3\",         \"threads\": \"1\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/2.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     },     \"3\": {         \"fid\": \"3\",         \"name\": \"WIN10\",         \"rank\": \"2\",         \"threads\": \"10\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"Win10技术交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/3.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"2\": {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"4\": {         \"fid\": \"4\",         \"name\": \"Linux\",         \"rank\": \"1\",         \"threads\": \"6\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/4.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"3\": {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"5\": {         \"fid\": \"5\",         \"name\": \"面试\",         \"rank\": \"0\",         \"threads\": \"0\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"0\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"view/img/forum.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     } }','1489925896')
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925836,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	UPDATE bbs_thread SET `subject`='mysql分库分表总结'  WHERE `tid`='23' 
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	UPDATE bbs_post SET `doctype`='0',`message`='<h1 class=\"postTitle\" style=\"margin-bottom: 0px; padding: 0px 0px 0px 5px; font-weight: bold; float: left; line-height: 1.5; width: 926.531px; clear: both; font-size: 14px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);\">单库单表&nbsp;</h1><div class=\"postBody\" style=\"margin: 5px 0px 0px; padding: 5px 2px 5px 5px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);\"><div id=\"cnblogs_post_body\" style=\"margin: 0px 0px 20px; padding: 0px; word-break: break-word;\"><p style=\"margin: 10px auto; padding: 0px; line-height: 1.5;\">单库单表是最常见的数据库设计，例如，有一张用户(user)表放在数据库db中，所有的用户都可以在db库中的user表中查到。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>单库多表&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>随着用户数量的增加，user表的数据量会越来越大，当数据量达到一定程度的时候对user表的查询会渐渐的变慢，从而影响整个DB的性能。如果使用mysql, 还有一个更严重的问题是，当需要添加一列的时候，mysql会锁表，期间所有的读写操作只能等待。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>可以通过某种方式将user进行水平的切分，产生两个表结构完全一样的user_0000,user_0001等表，user_0000 + user_0001 + …的数据刚好是一份完整的数据。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>多库多表&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 随着数据量增加也许单台DB的存储空间不够，随着查询量的增加单台数据库服务器已经没办法支撑。这个时候可以再对数据库进行水平区分。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>分库分表规则&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 设计表的时候需要确定此表按照什么样的规则进行分库分表。例如，当有新用户时，程序得确定将此用户信息添加到哪个表中；同理，当登录的时候我们得通过用户的账号找到数据库中对应的记录，所有的这些都需要按照某一规则进行。 路由&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过分库分表规则查找到对应的表和库的过程。如分库分表的规则是user_id mod 4的方式，当用户新注册了一个账号，账号id的123,我们可以通过id mod 4的方式确定此账号应该保存到User_0003表中。当用户123登录的时候，我们通过123 mod 4后确定记录在User_0003中。 分库分表产生的问题，及注意事项&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>1.&nbsp;&nbsp; 分库分表维度的问题&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>假如用户购买了商品,需要将交易记录保存取来，如果按照用户的纬度分表，则每个用户的交易记录都保存在同一表中，所以很快很方便的查找到某用户的购买情况，但是某商品被购买的情况则很有可能分布在多张表中，查找起来比较麻烦。反之，按照商品维度分表，可以很方便的查找到此商品的购买情况，但要查找到买人的交易记录比较麻烦。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>所以常见的解决方式有：&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp; a.通过扫表的方式解决，此方法基本不可能，效率太低了。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp; b.记录两份数据，一份按照用户纬度分表，一份按照商品维度分表。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp; c.通过搜索引擎解决，但如果实时性要求很高，又得关系到实时搜索。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>2.&nbsp;&nbsp; 联合查询的问题&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>联合查询基本不可能，因为关联的表有可能不在同一数据库中。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>3.&nbsp;&nbsp; 避免跨库事务&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>避免在一个事务中修改db0中的表的时候同时修改db1中的表，一个是操作起来更复杂，效率也会有一定影响。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>4.&nbsp;&nbsp; 尽量把同一组数据放到同一DB服务器上&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>例如将卖家a的商品和交易信息都放到db0中，当db1挂了的时候，卖家a相关的东西可以正常使用。也就是说避免数据库中的数据依赖另一数据库中的数据。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>一主多备&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>在实际的应用中，绝大部分情况都是读远大于写。Mysql提供了读写分离的机制，所有的写操作都必须对应到Master，读操作可以在Master和Slave机器上进行，Slave与Master的结构完全一样，一个Master可以有多个Slave,甚至Slave下还可以挂Slave,通过此方式可以有效的提高DB集群的QPS.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>所有的写操作都是先在Master上操作，然后同步更新到Slave上，所以从Master同步到Slave机器有一定的延迟，当系统很繁忙的时候，延迟问题会更加严重，Slave机器数量的增加也会使这个问题更加严重。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>此外，可以看出Master是集群的瓶颈，当写操作过多，会严重影响到Master的稳定性，如果Master挂掉，整个集群都将不能正常工作。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>所以，1. 当读压力很大的时候，可以考虑添加Slave机器的分式解决，但是当Slave机器达到一定的数量就得考虑分库了。 2. 当写压力很大的时候，就必须得进行分库操作。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>---------------------------------------------&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>MySQL使用为什么要分库分表 可以用说用到MySQL的地方,只要数据量一大, 马上就会遇到一个问题,要分库分表. 这里引用一个问题为什么要分库分表呢?MySQL处理不了大的表吗? 其实是可以处理的大表的.我所经历的项目中单表物理上文件大小在80G多,单表记录数在5亿以上,而且这个表 属于一个非常核用的表:朋友关系表.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>但这种方式可以说不是一个最佳方式. 因为面临文件系统如Ext3文件系统对大于大文件处理上也有许多问题. 这个层面可以用xfs文件系统进行替换.但MySQL单表太大后有一个问题是不好解决: 表结构调整相关的操作基 本不在可能.所以大项在使用中都会面监着分库分表的应用.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>从Innodb本身来讲数据文件的Btree上只有两个锁, 叶子节点锁和子节点锁,可以想而知道,当发生页拆分或是添加 新叶时都会造成表里不能写入数据. 所以分库分表还就是一个比较好的选择了.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>那么分库分表多少合适呢? 经测试在单表1000万条记录一下,写入读取性能是比较好的. 这样在留点buffer,那么单表全是数据字型的保持在 800万条记录以下, 有字符型的单表保持在500万以下.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>如果按 100库100表来规划,如用户业务: 500万*100*100 = 50000000万 = 5000亿记录.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>心里有一个数了,按业务做规划还是比较容易的.</p></div></div><p><br/></p>',`message_fmt`='<h1 class=\"postTitle\" style=\"margin-bottom: 0px; padding: 0px 0px 0px 5px; font-weight: bold; float: left; line-height: 1.5; width: 926.531px; clear: both; font-size: 14px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);\">单库单表&nbsp;</h1><div class=\"postBody\" style=\"margin: 5px 0px 0px; padding: 5px 2px 5px 5px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);\"><div id=\"cnblogs_post_body\" style=\"margin: 0px 0px 20px; padding: 0px; word-break: break-word;\"><p style=\"margin: 10px auto; padding: 0px; line-height: 1.5;\">单库单表是最常见的数据库设计，例如，有一张用户(user)表放在数据库db中，所有的用户都可以在db库中的user表中查到。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>单库多表&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>随着用户数量的增加，user表的数据量会越来越大，当数据量达到一定程度的时候对user表的查询会渐渐的变慢，从而影响整个DB的性能。如果使用mysql, 还有一个更严重的问题是，当需要添加一列的时候，mysql会锁表，期间所有的读写操作只能等待。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>可以通过某种方式将user进行水平的切分，产生两个表结构完全一样的user_0000,user_0001等表，user_0000 + user_0001 + …的数据刚好是一份完整的数据。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>多库多表&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 随着数据量增加也许单台DB的存储空间不够，随着查询量的增加单台数据库服务器已经没办法支撑。这个时候可以再对数据库进行水平区分。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>分库分表规则&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 设计表的时候需要确定此表按照什么样的规则进行分库分表。例如，当有新用户时，程序得确定将此用户信息添加到哪个表中；同理，当登录的时候我们得通过用户的账号找到数据库中对应的记录，所有的这些都需要按照某一规则进行。 路由&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过分库分表规则查找到对应的表和库的过程。如分库分表的规则是user_id mod 4的方式，当用户新注册了一个账号，账号id的123,我们可以通过id mod 4的方式确定此账号应该保存到User_0003表中。当用户123登录的时候，我们通过123 mod 4后确定记录在User_0003中。 分库分表产生的问题，及注意事项&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>1.&nbsp;&nbsp; 分库分表维度的问题&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>假如用户购买了商品,需要将交易记录保存取来，如果按照用户的纬度分表，则每个用户的交易记录都保存在同一表中，所以很快很方便的查找到某用户的购买情况，但是某商品被购买的情况则很有可能分布在多张表中，查找起来比较麻烦。反之，按照商品维度分表，可以很方便的查找到此商品的购买情况，但要查找到买人的交易记录比较麻烦。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>所以常见的解决方式有：&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp; a.通过扫表的方式解决，此方法基本不可能，效率太低了。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp; b.记录两份数据，一份按照用户纬度分表，一份按照商品维度分表。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>&nbsp;&nbsp;&nbsp;&nbsp; c.通过搜索引擎解决，但如果实时性要求很高，又得关系到实时搜索。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>2.&nbsp;&nbsp; 联合查询的问题&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>联合查询基本不可能，因为关联的表有可能不在同一数据库中。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>3.&nbsp;&nbsp; 避免跨库事务&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>避免在一个事务中修改db0中的表的时候同时修改db1中的表，一个是操作起来更复杂，效率也会有一定影响。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/>4.&nbsp;&nbsp; 尽量把同一组数据放到同一DB服务器上&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>例如将卖家a的商品和交易信息都放到db0中，当db1挂了的时候，卖家a相关的东西可以正常使用。也就是说避免数据库中的数据依赖另一数据库中的数据。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>一主多备&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>在实际的应用中，绝大部分情况都是读远大于写。Mysql提供了读写分离的机制，所有的写操作都必须对应到Master，读操作可以在Master和Slave机器上进行，Slave与Master的结构完全一样，一个Master可以有多个Slave,甚至Slave下还可以挂Slave,通过此方式可以有效的提高DB集群的QPS.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>所有的写操作都是先在Master上操作，然后同步更新到Slave上，所以从Master同步到Slave机器有一定的延迟，当系统很繁忙的时候，延迟问题会更加严重，Slave机器数量的增加也会使这个问题更加严重。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>此外，可以看出Master是集群的瓶颈，当写操作过多，会严重影响到Master的稳定性，如果Master挂掉，整个集群都将不能正常工作。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>所以，1. 当读压力很大的时候，可以考虑添加Slave机器的分式解决，但是当Slave机器达到一定的数量就得考虑分库了。 2. 当写压力很大的时候，就必须得进行分库操作。&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>---------------------------------------------&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>MySQL使用为什么要分库分表 可以用说用到MySQL的地方,只要数据量一大, 马上就会遇到一个问题,要分库分表. 这里引用一个问题为什么要分库分表呢?MySQL处理不了大的表吗? 其实是可以处理的大表的.我所经历的项目中单表物理上文件大小在80G多,单表记录数在5亿以上,而且这个表 属于一个非常核用的表:朋友关系表.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>但这种方式可以说不是一个最佳方式. 因为面临文件系统如Ext3文件系统对大于大文件处理上也有许多问题. 这个层面可以用xfs文件系统进行替换.但MySQL单表太大后有一个问题是不好解决: 表结构调整相关的操作基 本不在可能.所以大项在使用中都会面监着分库分表的应用.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>从Innodb本身来讲数据文件的Btree上只有两个锁, 叶子节点锁和子节点锁,可以想而知道,当发生页拆分或是添加 新叶时都会造成表里不能写入数据. 所以分库分表还就是一个比较好的选择了.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>那么分库分表多少合适呢? 经测试在单表1000万条记录一下,写入读取性能是比较好的. 这样在留点buffer,那么单表全是数据字型的保持在 800万条记录以下, 有字符型的单表保持在500万以下.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>如果按 100库100表来规划,如用户业务: 500万*100*100 = 50000000万 = 5000亿记录.&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>心里有一个数了,按业务做规划还是比较容易的.</p></div></div><p><br/></p>'  WHERE `pid`='23' 
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	UPDATE bbs_thread SET `images`='0',`files`='0'  WHERE `tid`='23' 
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	UPDATE bbs_post SET `images`='0',`files`='0'  WHERE `pid`='23' 
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	REPLACE INTO bbs_thread_summary (`tid`,`summary`) VALUES ('23','mysql、分库分表')
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	UPDATE bbs_thread SET `tagids`='',`tagids_time`='0'  WHERE `tid`='23' 
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925836,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:16	110.251.15.252	/?post-update-23.htm	1	UPDATE bbs_session SET `last_date`='1489925836'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:17:17	110.251.15.252	/?thread-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925837,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:17	110.251.15.252	/?thread-23.htm	1	UPDATE bbs_thread SET `tagids`='',`tagids_time`='1489925837'  WHERE `tid`='23' 
<?php exit;?>	2017-03-19 20:17:17	110.251.15.252	/?thread-23.htm	1	UPDATE LOW_PRIORITY `bbs_thread` SET views=views+1 WHERE tid='23'
<?php exit;?>	2017-03-19 20:17:17	110.251.15.252	/?thread-23.htm	1	UPDATE bbs_post SET `GG_reply_read`='1'  WHERE `tid`=23 AND `GG_reply_user`=1 AND `GG_reply_read`=0 
<?php exit;?>	2017-03-19 20:17:17	110.251.15.252	/?thread-23.htm	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925837,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:17	110.251.15.252	/?thread-23.htm	1	UPDATE bbs_session SET `url`='?thread-23.htm',`last_date`='1489925837'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 20:17:21	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925841,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:21	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_hoping_hot_threads','[]','1489929441')
<?php exit;?>	2017-03-19 20:17:21	110.251.15.252	/	1	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489925841,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 20:17:21	110.251.15.252	/	1	UPDATE bbs_session SET `fid`='0',`url`='',`last_date`='1489925841'  WHERE `sid`='prom26svsa8ur0fjnhqg4bbi72' 
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_forumlist' 
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_forumlist','{     \"1\": {         \"fid\": \"1\",         \"name\": \"PHP\",         \"rank\": \"4\",         \"threads\": \"9\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"PHP交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/1.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         ],         \"tagcatemap\": {             \"1\": {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         },         \"tagmap\": {             \"2\": {                 \"tagid\": \"2\",                 \"cateid\": \"1\",                 \"name\": \"Pay\",                 \"rank\": \"1\",                 \"enable\": \"1\"             },             \"1\": {                 \"tagid\": \"1\",                 \"cateid\": \"1\",                 \"name\": \"Offices\",                 \"rank\": \"0\",                 \"enable\": \"1\"             },             \"3\": {                 \"tagid\": \"3\",                 \"cateid\": \"1\",                 \"name\": \"Redis、Memcached\",                 \"rank\": \"0\",                 \"enable\": \"1\"             }         }     },     \"2\": {         \"fid\": \"2\",         \"name\": \"HTML\",         \"rank\": \"3\",         \"threads\": \"1\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/2.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     },     \"3\": {         \"fid\": \"3\",         \"name\": \"WIN10\",         \"rank\": \"2\",         \"threads\": \"10\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"Win10技术交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/3.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"2\": {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"4\": {         \"fid\": \"4\",         \"name\": \"Linux\",         \"rank\": \"1\",         \"threads\": \"6\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/4.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"3\": {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"5\": {         \"fid\": \"5\",         \"name\": \"面试\",         \"rank\": \"0\",         \"threads\": \"0\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"0\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"view/img/forum.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     } }','1489934236')
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489925772,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489934176,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_hoping_hot_threads' 
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_hoping_hot_threads','[]','1489937776')
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_cron_lock_1','1','1489934186')
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	DELETE FROM bbs_session  WHERE `last_date`<1489930576 
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	DELETE FROM bbs_session_data  WHERE `last_date`<1489930576 
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_cron_lock_1' 
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489934176,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489934176,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 22:36:16	61.151.218.118	/	0	UPDATE bbs_session SET `uid`='',`fid`='0',`url`='',`last_date`='1489934176',`data`='',`ip`='1033362038',`useragent`='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.124 Safari/537.36',`bigdata`='0'  WHERE `sid`='lqg1rf5mkievdhdb3sj95jp1g1' 
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_forumlist' 
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_forumlist','{     \"1\": {         \"fid\": \"1\",         \"name\": \"PHP\",         \"rank\": \"4\",         \"threads\": \"9\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"PHP交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/1.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         ],         \"tagcatemap\": {             \"1\": {                 \"cateid\": \"1\",                 \"fid\": \"1\",                 \"name\": \"ThinkPHP\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [                     {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 ],                 \"tagmap\": {                     \"2\": {                         \"tagid\": \"2\",                         \"cateid\": \"1\",                         \"name\": \"Pay\",                         \"rank\": \"1\",                         \"enable\": \"1\"                     },                     \"1\": {                         \"tagid\": \"1\",                         \"cateid\": \"1\",                         \"name\": \"Offices\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     },                     \"3\": {                         \"tagid\": \"3\",                         \"cateid\": \"1\",                         \"name\": \"Redis、Memcached\",                         \"rank\": \"0\",                         \"enable\": \"1\"                     }                 }             }         },         \"tagmap\": {             \"2\": {                 \"tagid\": \"2\",                 \"cateid\": \"1\",                 \"name\": \"Pay\",                 \"rank\": \"1\",                 \"enable\": \"1\"             },             \"1\": {                 \"tagid\": \"1\",                 \"cateid\": \"1\",                 \"name\": \"Offices\",                 \"rank\": \"0\",                 \"enable\": \"1\"             },             \"3\": {                 \"tagid\": \"3\",                 \"cateid\": \"1\",                 \"name\": \"Redis、Memcached\",                 \"rank\": \"0\",                 \"enable\": \"1\"             }         }     },     \"2\": {         \"fid\": \"2\",         \"name\": \"HTML\",         \"rank\": \"3\",         \"threads\": \"1\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/2.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     },     \"3\": {         \"fid\": \"3\",         \"name\": \"WIN10\",         \"rank\": \"2\",         \"threads\": \"10\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"Win10技术交流\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/3.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"2\": {                 \"cateid\": \"2\",                 \"fid\": \"3\",                 \"name\": \"技能\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"4\": {         \"fid\": \"4\",         \"name\": \"Linux\",         \"rank\": \"1\",         \"threads\": \"6\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"1488605467\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"upload/forum/4.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [             {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         ],         \"tagcatemap\": {             \"3\": {                 \"cateid\": \"3\",                 \"fid\": \"4\",                 \"name\": \"数据库\",                 \"rank\": \"0\",                 \"enable\": \"1\",                 \"taglist\": [],                 \"tagmap\": []             }         },         \"tagmap\": []     },     \"5\": {         \"fid\": \"5\",         \"name\": \"面试\",         \"rank\": \"0\",         \"threads\": \"0\",         \"todayposts\": \"0\",         \"todaythreads\": \"0\",         \"brief\": \"\",         \"announcement\": \"\",         \"accesson\": \"0\",         \"orderby\": \"0\",         \"create_date\": \"0\",         \"icon\": \"0\",         \"moduids\": \"\",         \"seo_title\": \"\",         \"seo_keywords\": \"\",         \"digests\": \"0\",         \"fup\": \"0\",         \"create_date_fmt\": \"1970-1-1\",         \"icon_url\": \"view/img/forum.png\",         \"accesslist\": [],         \"modlist\": [],         \"tagcatelist\": [],         \"tagcatemap\": [],         \"tagmap\": []     } }','1489935481')
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489934176,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489935421,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_hoping_hot_threads','[]','1489939021')
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_cron_lock_1','1','1489935431')
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	DELETE FROM bbs_session  WHERE `last_date`<1489931821 
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	DELETE FROM bbs_session_data  WHERE `last_date`<1489931821 
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	DELETE FROM bbs_cache  WHERE `k`='bbs_cron_lock_1' 
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	REPLACE INTO bbs_cache (`k`,`v`,`expiry`) VALUES ('bbs_runtime','{     \"users\": 1,     \"posts\": 0,     \"threads\": 26,     \"todayusers\": 0,     \"todayposts\": 0,     \"todaythreads\": 0,     \"onlines\": 1,     \"cron_1_last_date\": 1489935421,     \"cron_2_last_date\": 1489852800,     \"forums\": 5,     \"lastupdate\": 1489935421,     \"digests\": -2 }','0')
<?php exit;?>	2017-03-19 22:57:01	114.249.248.49	/	0	UPDATE bbs_session SET `uid`='',`fid`='0',`url`='',`last_date`='1489935421',`data`='',`ip`='1928984625',`useragent`='Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.221 Safari/537.36 SE 2.X MetaSr 1.0',`bigdata`='0'  WHERE `sid`='j1ehk24pt1sb1vg278sugufte4' 
